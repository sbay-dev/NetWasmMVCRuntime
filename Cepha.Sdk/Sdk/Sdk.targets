<Project>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ðŸ§¬ Cepha SDK v1.0 â€” Sdk.targets
       Physarum polycephalum â€” Auto-imported LAST
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

  <!-- â”€â”€â”€ Import base .NET SDK targets â”€â”€â”€ -->
  <Import Project="Sdk.targets" Sdk="Microsoft.NET.Sdk.WebAssembly" Condition="'$(_CephaIsClient)' == 'true'" />
  <Import Project="Sdk.targets" Sdk="Microsoft.NET.Sdk"              Condition="'$(_CephaIsServer)' == 'true'" />

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       Auto Package References
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <ItemGroup>
    <PackageReference Include="Microsoft.EntityFrameworkCore.Sqlite"     Version="10.0.1" />
    <PackageReference Include="Microsoft.Extensions.DependencyInjection" Version="10.0.1" />
  </ItemGroup>

  <!-- Client: EF Core Design (exclude contentFiles + native â€” proot/Termux compatibility) -->
  <ItemGroup Condition="'$(_CephaIsClient)' == 'true'">
    <PackageReference Include="Microsoft.EntityFrameworkCore.Design" Version="10.0.1">
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; analyzers; buildtransitive</IncludeAssets>
      <ExcludeAssets>contentFiles; native</ExcludeAssets>
    </PackageReference>
  </ItemGroup>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SQLite Native for WASM (e_sqlite3.a)
       Wildcard version to avoid path mismatch across SQLitePCLRaw updates
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <ItemGroup Condition="'$(RuntimeIdentifier)' == 'browser-wasm'">
    <NativeFileReference
      Include="$(NuGetPackageRoot)sqlitepclraw.lib.e_sqlite3\*\runtimes\browser-wasm\nativeassets\**\e_sqlite3.a" />
  </ItemGroup>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       Client: .cshtml as Embedded Resources (custom MVC engine)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <ItemGroup Condition="'$(_CephaIsClient)' == 'true'">
    <Content       Remove="Views\**\*.cshtml" />
    <None          Remove="Views\**\*.cshtml" />
    <RazorCompile  Remove="Views\**\*.cshtml" />
    <EmbeddedResource Include="Views\**\*.cshtml" />
  </ItemGroup>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       Client: JS Fingerprinting for cache busting
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <ItemGroup Condition="'$(_CephaIsClient)' == 'true'">
    <StaticWebAssetFingerprintPattern Include="CephaJS" Pattern="*.js" Expression="#[.{fingerprint}]!" />
  </ItemGroup>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       Global Usings â€” Cepha namespaces everywhere
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <ItemGroup>
    <Using Include="WasmMvcRuntime.Abstractions" />
    <Using Include="WasmMvcRuntime.Core" />
    <Using Include="Microsoft.EntityFrameworkCore" />
    <Using Include="Microsoft.Extensions.DependencyInjection" />
  </ItemGroup>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ðŸ§¬ Build Banner
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <Target Name="_CephaBuildBanner" BeforeTargets="CoreCompile">
    <Message Importance="high" Text="ðŸ§¬ Cepha SDK v$(CephaVersion) â€” $(CephaMode) mode â€” Physarum polycephalum" />
  </Target>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ðŸ“¦ Deployment Targets
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

  <!-- cepha-publish-local: Build + serve locally -->
  <Target Name="CephaPublishLocal" DependsOnTargets="Publish">
    <Message Importance="high" Text="ðŸ§¬ Cepha: Published to $(PublishDir)" />
    <Message Importance="high" Text="   Run: dotnet serve -p 5000 --fallback-file index.html -d $(PublishDir)wwwroot" />
  </Target>

  <!-- cepha-publish-cloudflare: Build for Cloudflare Pages -->
  <Target Name="CephaPublishCloudflare" DependsOnTargets="Publish"
          Condition="'$(CephaDeployCloudflare)' == 'true'">
    <PropertyGroup>
      <_CfOutputDir>$(PublishDir)cf-pages\</_CfOutputDir>
    </PropertyGroup>
    <MakeDir Directories="$(_CfOutputDir)" />
    <Copy SourceFiles="@(PublishFiles)" DestinationFolder="$(_CfOutputDir)" />
    <Message Importance="high" Text="ðŸ§¬ Cepha: Cloudflare Pages output â†’ $(_CfOutputDir)" />
    <Message Importance="high" Text="   Deploy: npx wrangler pages deploy $(_CfOutputDir)" />
  </Target>

  <!-- cepha-publish-azure: Build for Azure Static Web Apps -->
  <Target Name="CephaPublishAzure" DependsOnTargets="Publish"
          Condition="'$(CephaDeployAzure)' == 'true'">
    <Message Importance="high" Text="ðŸ§¬ Cepha: Azure SWA output â†’ $(PublishDir)" />
    <Message Importance="high" Text="   Deploy: swa deploy $(PublishDir)wwwroot --env production" />
  </Target>

</Project>
